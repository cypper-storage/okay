{"swagger":"2.0","info":{"title":"postfixadmin mailbox manager REST API","version":"1.0.0"},"basePath":"/","paths":{"/domains/{domain}/mailboxes":{"post":{"summary":"Create mailbox.","description":"Create mailbox with mailbox name and domain if not exist.","produces":["application/json"],"parameters":[{"name":"auth-token","description":"Mailbox authorization token","in":"header","required":true,"type":"string"},{"name":"domain","description":"Email domain.","in":"path","required":true,"type":"string"},{"name":"mailboxes","description":"array of mailboxes","in":"body","required":true,"schema":{"type":"array","items":{"$ref":"#/definitions/NewMailbox"}}}],"responses":{"201":{"description":"Mailbox successfully created"},"400":{"description":"Mailbox already exist or validation failed","schema":{"$ref":"#/definitions/Error"}},"401":{"description":"Authorization error. Auth-token is not provided.","schema":{"$ref":"#/definitions/Error"}},"403":{"description":"Authorization error. Invalid token.","schema":{"$ref":"#/definitions/Error"}}}}},"/domains/{domain}/mailbox/{email}":{"put":{"summary":"Update mailbox.","description":"Update mailbox with mailbox name and domain. If not exist create new one.","produces":["application/json"],"parameters":[{"name":"auth-token","description":"Mailbox authorization token","in":"header","required":true,"type":"string"},{"name":"domain","description":"Email domain.","in":"path","required":true,"type":"string"},{"name":"email","description":"Mailbox email.","in":"path","required":true,"type":"string"},{"name":"mailbox","description":"desc of mailboxes","in":"body","required":true,"schema":{"type":"object","items":{"$ref":"#/definitions/NewMailbox"}}}],"responses":{"204":{"description":"Mailbox successfully updated"},"400":{"description":"Validation failed","schema":{"$ref":"#/definitions/Error"}},"401":{"description":"Authorization error. Auth-token is not provided.","schema":{"$ref":"#/definitions/Error"}},"403":{"description":"Authorization error. Invalid token.","schema":{"$ref":"#/definitions/Error"}}}}},"/domains/{domain}/mailboxes/{usernames}":{"delete":{"summary":"Delete mailbox.","description":"Delete mailbox.","produces":["application/json"],"parameters":[{"name":"auth-token","description":"User authorization token","in":"header","required":true,"type":"string"},{"name":"domain","description":"Domain name","in":"path","required":true,"type":"string"},{"name":"usernames","description":"An list of emails separated by comma","in":"path","required":true,"type":"string"}],"responses":{"204":{"description":"Mailbox successfully deleted."},"401":{"description":"Authorization error. Auth-token is not provided.","schema":{"$ref":"#/definitions/Error"}},"403":{"description":"Authorization error. Invalid token.","schema":{"$ref":"#/definitions/Error"}}}}},"/adm/tasks":{"get":{"summary":"Returns a list of scheduled and recent tasks","responses":{"200":{"description":"Response with tasks","schema":{"type":"array","items":{"$ref":"#/definitions/SchedulerTask"}}}}}},"/uat/data-sets":{"get":{"summary":"Returns a list of registered UAT data sets","description":"Returns a list of registered UAT data sets","produces":["application/json"],"parameters":[{"name":"uat-token","description":"auth token","in":"header","required":true,"type":"string"}],"responses":{"200":{"description":"result contains UAT data sets","schema":{"type":"array","items":{"$ref":"#/definitions/DataSet"}}},"401":{"description":"authorization failed","schema":{"$ref":"#/definitions/Error"}}}}},"/uat/data-sets/{id}/apply":{"post":{"summary":"Applies a registered UAT data set with an id specified","description":"Applies a registered UAT data set with an id specified","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"uat-token","description":"auth token","in":"header","required":true,"type":"string"},{"name":"id","description":"data set id","in":"path","required":true,"type":"string"},{"name":"params","description":"optional data set parameters","in":"body","required":false,"schema":{"$ref":"#/definitions/DataSetParams"}}],"responses":{"204":{"description":"data set successfully applied"},"401":{"description":"authorization failed","schema":{"$ref":"#/definitions/Error"}},"404":{"description":"data set not found","schema":{"$ref":"#/definitions/Error"}}}}}},"definitions":{"NewMailbox":{"type":"object","required":["username","password","name"],"properties":{"username":{"description":"Username that will be used for mailbox creation","type":"string"},"password":{"description":"Mailbox password. Min length 6 symbols, at least one upper letter and number.","type":"string"},"name":{"description":"Mailbox user's name.","type":"string"}}},"SchedulerTask":{"type":"object","required":["status"],"properties":{"status":{"description":"Task status","$ref":"#/definitions/TaskStatus"}}},"TaskStatus":{"type":"object","required":["status","startedAt","completedAt","progress"],"properties":{"status":{"description":"Task status","type":"string"},"startedAt":{"description":"Task started date","type":"string","format":"date-time"},"completedAt":{"description":"Task completed date","type":"string","format":"date-time"},"progress":{"description":"Task progress","type":"object"}}},"DataSet":{"type":"object","required":["id"],"properties":{"id":{"description":"data set id","type":"string"},"description":{"description":"human-readable description","type":"string"}}},"DataSetParams":{"type":"object","additionalProperties":true},"Error":{"type":"object","required":["id","error","message"],"properties":{"id":{"description":"Error id","type":"integer"},"error":{"description":"Error name","type":"string"},"message":{"description":"Error description","type":"string"},"details":{"description":"Additional information about error","type":"object"},"code":{"description":"Error code, used for i18n","type":"string"},"arguments":{"description":"Error message arguments, used for i18n","type":"array","items":{"type":"object"}}}}}}
